<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="DoxyPress 1.2.10"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EEPROMextent: CircularBuffer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxypress.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by DoxyPress -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EEPROMextent
   </div>
   <div id="projectbrief">Arduino EEPROM library</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by DoxyPress 1.2.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classCircularBuffer.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classCircularBuffer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CircularBuffer Class Reference</div>  </div>
  <div class="clear-floats"></div>
</div><!--header-->
<div class="contents">

<p><code>#include &quot;<a class="el" href="CircularBuffer_8hpp_source.html">CircularBuffer.hpp</a>&quot;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8c5de0e610bb50bac684f4707e23431c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#a8c5de0e610bb50bac684f4707e23431c">CircularBuffer</a> ()</td></tr>
<tr class="separator:a8c5de0e610bb50bac684f4707e23431c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a792545be538920a0efbeea005279831b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#a792545be538920a0efbeea005279831b">begin</a> (int inStartListPos, byte inElementSize, byte inReplicaNumber)</td></tr>
<tr class="separator:a792545be538920a0efbeea005279831b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83658c11dabbd03cc7714ac09b962b71"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#a83658c11dabbd03cc7714ac09b962b71">read</a> (void *outpObject)</td></tr>
<tr class="separator:a83658c11dabbd03cc7714ac09b962b71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae546bc086f88369e2aab687b8396ba0c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#ae546bc086f88369e2aab687b8396ba0c">write</a> (void *inpObject, bool inUpdate = false)</td></tr>
<tr class="separator:ae546bc086f88369e2aab687b8396ba0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab88645c176a74d2e1f24ae3a9a5347da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#ab88645c176a74d2e1f24ae3a9a5347da">update</a> (void *inpObject)</td></tr>
<tr class="separator:ab88645c176a74d2e1f24ae3a9a5347da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c2ef9f285d879b65686076f2fd1d6fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#a5c2ef9f285d879b65686076f2fd1d6fb">getStartRead</a> ()</td></tr>
<tr class="separator:a5c2ef9f285d879b65686076f2fd1d6fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0da92a003be6743196f6131d1466e2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#a6c0da92a003be6743196f6131d1466e2">startWrite</a> ()</td></tr>
<tr class="separator:a6c0da92a003be6743196f6131d1466e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab32be357ea6857ae08a357205921bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCircularBuffer.html#a5ab32be357ea6857ae08a357205921bd">clear</a> () const </td></tr>
<tr class="separator:a5ab32be357ea6857ae08a357205921bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class implements the Atmel solution to avoid writing in EEPROM always in the same area to improve lifetime of this memory : a Circular Buffer. See <a href="http://www.atmel.com/images/doc2526.pdf">http://www.atmel.com/images/doc2526.pdf</a> . Part of the pdf file :</p>
<blockquote class="doxtable">
<p>By having a circular buffer (O-buffer) in EEPROM it is possible to increase the number of times that a parameter can be stored in EEPROM. If the buffer has two levels the number of times that the parameter can be stored is twice the endurance of one single EEPROM cell: 200 k erase/writes. By using this approach it is possible to increase the number of times a parameter can be stored by increasing the O-buffer size. In other word, the idea is to distribute the storage of the parameter over several EEPROM locations to achieve increased parameter storage endurance. When using the Obuffer approach the parameter storage endurance equal the number of memory locations used in the O-buffer times the endurance of a single EEPROM location.</p>
</blockquote>
<p>A circular buffer is a way to reduce the use of each EEPROM cell, and improve life time of the full EEPROM memory. An index of bytes is stored at the beginning of the area. Each index represents a data area.</p>
<pre class="fragment">|0|1|2|3|4||---0---|---1---|---2---|---3---|---4---|
</pre> 
<p class="definition">Definition at line <a class="el" href="CircularBuffer_8hpp_source.html#l00031">31</a> of file <a class="el" href="CircularBuffer_8hpp_source.html">CircularBuffer.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8c5de0e610bb50bac684f4707e23431c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CircularBuffer::CircularBuffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Basic constructor. </p>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8hpp_source.html#l00040">40</a> of file <a class="el" href="CircularBuffer_8hpp_source.html">CircularBuffer.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a792545be538920a0efbeea005279831b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int CircularBuffer::begin </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>inStartListPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>inElementSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">byte&#160;</td>
          <td class="paramname"><em>inReplicaNumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialize the instance. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inStartListPos</td><td>EEPROM address of the begginning of the memory used for the storage </td></tr>
    <tr><td class="paramname">inElementSize</td><td>Size in bytes of one item to save. </td></tr>
    <tr><td class="paramname">inReplicaNumber</td><td>Number of copies of the element can be reserved for the buffer. 2 is a minimum, 255 a maximum. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of EEPROM bytes reserved for the circular buffer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8hpp_source.html#l00048">48</a> of file <a class="el" href="CircularBuffer_8hpp_source.html">CircularBuffer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5ab32be357ea6857ae08a357205921bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CircularBuffer::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fill with 0s the area reserved for the buffer. Use with care ! </p>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8cpp_source.html#l00078">78</a> of file <a class="el" href="CircularBuffer_8cpp_source.html">CircularBuffer.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5c2ef9f285d879b65686076f2fd1d6fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CircularBuffer::getStartRead </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If data cannot be loaded with a single call to a 'read', this function can be called to know where to read the current good element. </p><dl class="section return"><dt>Returns</dt><dd>EEPROM address to start reading data. </dd></dl>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8cpp_source.html#l00083">83</a> of file <a class="el" href="CircularBuffer_8cpp_source.html">CircularBuffer.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a83658c11dabbd03cc7714ac09b962b71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * CircularBuffer::read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>outpObject</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read the last saved element in the buffer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">outpObject</td><td>object to fill with the content of the EEPROM memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>outpObject address. </dd></dl>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8cpp_source.html#l00049">49</a> of file <a class="el" href="CircularBuffer_8cpp_source.html">CircularBuffer.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6c0da92a003be6743196f6131d1466e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CircularBuffer::startWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If data cannot be stored with a single call to a 'write', this function can be called to prepare the saving of the next good element. </p><dl class="section return"><dt>Returns</dt><dd>EEPROM address to start writing data. Be careful, do not store more bytes than the inElementSize given during <a class="el" href="classCircularBuffer.html#a792545be538920a0efbeea005279831b">begin()</a> call ! </dd></dl>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8cpp_source.html#l00089">89</a> of file <a class="el" href="CircularBuffer_8cpp_source.html">CircularBuffer.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab88645c176a74d2e1f24ae3a9a5347da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CircularBuffer::update </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>inpObject</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write a new element in the buffer, checking for byte to update or not. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inpObject</td><td>object to write to the EEPROM memory. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8hpp_source.html#l00068">68</a> of file <a class="el" href="CircularBuffer_8hpp_source.html">CircularBuffer.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae546bc086f88369e2aab687b8396ba0c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CircularBuffer::write </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>inpObject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>inUpdate</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write a new element in the buffer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inpObject</td><td>object to write to the EEPROM memory. </td></tr>
    <tr><td class="paramname">inUpdate</td><td>if true, an upadte is made, avoiding writing bytes already good in the memory. If false (the default), each byte is written at its place, even if the content was good. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="CircularBuffer_8cpp_source.html#l00057">57</a> of file <a class="el" href="CircularBuffer_8cpp_source.html">CircularBuffer.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>D:/Mes documents/Trusty/Arduino/Libraries/EEPROMextent/src/<a class="el" href="CircularBuffer_8hpp_source.html">CircularBuffer.hpp</a></li>
<li>D:/Mes documents/Trusty/Arduino/Libraries/EEPROMextent/src/<a class="el" href="CircularBuffer_8cpp_source.html">CircularBuffer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- Generated by DoxyPress 1.2.10 -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classCircularBuffer.html">CircularBuffer</a></li>
    <li class="footer">Generated on dim. juil. 15 2018 14:40:09 for EEPROMextent &nbsp; by
    <a href="http://www.copperspice.com/documentation-doxypress.html">
    <img class="footer" src="doxypress.png" alt="DoxyPress"/></a> 1.2.10 </li>
  </ul>
</div>
</body>
</html>
